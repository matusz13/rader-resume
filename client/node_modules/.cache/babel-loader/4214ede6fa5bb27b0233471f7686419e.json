{"ast":null,"code":"import _regeneratorRuntime from\"/Users/13triine/Documents/rader-resume/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _classCallCheck from\"/Users/13triine/Documents/rader-resume/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/13triine/Documents/rader-resume/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/13triine/Documents/rader-resume/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/13triine/Documents/rader-resume/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/Users/13triine/Documents/rader-resume/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/13triine/Documents/rader-resume/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import axios from'axios';var CatchAll=/*#__PURE__*/function(_React$Component){_inherits(CatchAll,_React$Component);function CatchAll(props){var _this;_classCallCheck(this,CatchAll);_this=_possibleConstructorReturn(this,_getPrototypeOf(CatchAll).call(this,props));_this.renderRedirect=function(url){window.location.replace(url);};_this.callapi_FindShort=function _callee(){var config;return _regeneratorRuntime.async(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:config={method:'POST',url:'/api/short_id',timeout:1000*5,headers:{'Content-Type':'application/json','Accept':'application/json'},data:JSON.stringify({url:_this.state.url})};axios(config).then(function(response){var body=response.data;if(response.status!==200){console.log('error findShortAPI ');throw Error(body.message);}console.log('body '+body.url);_this.renderRedirect(body.url);});//todo: some error handling and a 404 page\ncase 2:case\"end\":return _context.stop();}}});};_this.state={url:_this.props.location,matches:window.matchMedia(\"(min-width: 900px)\").matches,isLoading:false};_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));return _this;}_createClass(CatchAll,[{key:\"handleChange\",value:function handleChange(event){//this.setState({\n//  input: event.target.value\n//});\n}},{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;console.log('component mount');var handler=function handler(e){return _this2.setState({matches:e.matches});};window.matchMedia(\"(min-width: 900px)\").addListener(handler);this.callapi_FindShort();}},{key:\"render\",value:function render(){return this.state.isLoading?React.createElement(LoadingScreen,null):React.createElement(\"div\",null,\"redirecting...\");}}]);return CatchAll;}(React.Component);function LoadingScreen(){console.log('return loading screen');return React.createElement(\"div\",{className:\"LoadingScreen\"},React.createElement(\"h3\",null,\"loading\"));}export default CatchAll;","map":{"version":3,"sources":["/Users/13triine/Documents/rader-resume/client/src/components/CatchAll.js"],"names":["React","axios","CatchAll","props","renderRedirect","url","window","location","replace","callapi_FindShort","config","method","timeout","headers","data","JSON","stringify","state","then","response","body","status","console","log","Error","message","matches","matchMedia","isLoading","handleChange","bind","event","handler","e","setState","addListener","Component","LoadingScreen"],"mappings":"ipCAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,GAEMC,CAAAA,Q,8EAGL,kBAAYC,KAAZ,CAAmB,0CAChB,0EAAMA,KAAN,GADgB,MAyBpBC,cAzBoB,CAyBH,SAACC,GAAD,CAAS,CACtBC,MAAM,CAACC,QAAP,CAAgBC,OAAhB,CAAwBH,GAAxB,EAED,CA5BiB,OA8BpBI,iBA9BoB,CA8BA,+IACVC,MADU,CACD,CACXC,MAAM,CAAE,MADG,CAEXN,GAAG,CAAE,eAFM,CAGXO,OAAO,CAAE,KAAO,CAHL,CAIXC,OAAO,CAAE,CAAC,eAAe,kBAAhB,CACA,SAAS,kBADT,CAJE,CAOXC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CAACX,GAAG,CAAC,MAAKY,KAAL,CAAWZ,GAAhB,CAAf,CAPK,CADC,CAWhBJ,KAAK,CAACS,MAAD,CAAL,CACCQ,IADD,CACM,SAAAC,QAAQ,CAAI,CACd,GAAMC,CAAAA,IAAI,CAAID,QAAQ,CAACL,IAAvB,CAEA,GAAIK,QAAQ,CAACE,MAAT,GAAoB,GAAxB,CAA6B,CAC3BC,OAAO,CAACC,GAAR,CAAY,qBAAZ,EACA,KAAMC,CAAAA,KAAK,CAACJ,IAAI,CAACK,OAAN,CAAX,CACD,CACDH,OAAO,CAACC,GAAR,CAAY,QAAUH,IAAI,CAACf,GAA3B,EACA,MAAKD,cAAL,CAAoBgB,IAAI,CAACf,GAAzB,EACL,CAVC,EAUE;AArBc,8CA9BA,CAEhB,MAAKY,KAAL,CAAa,CACbZ,GAAG,CAAE,MAAKF,KAAL,CAAWI,QADH,CAEbmB,OAAO,CAAEpB,MAAM,CAACqB,UAAP,CAAkB,oBAAlB,EAAwCD,OAFpC,CAGbE,SAAS,CAAC,KAHG,CAAb,CAMA,MAAKC,YAAL,CAAoB,MAAKA,YAAL,CAAkBC,IAAlB,+BAApB,CARgB,aASlB,C,uEAEWC,K,CAAO,CAChB;AACA;AACA;AACA,C,6DAEgB,iBAChBT,OAAO,CAACC,GAAR,CAAY,iBAAZ,EACA,GAAMS,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,CAAAC,CAAC,QAAI,CAAA,MAAI,CAACC,QAAL,CAAc,CAACR,OAAO,CAAEO,CAAC,CAACP,OAAZ,CAAd,CAAJ,EAAjB,CACApB,MAAM,CAACqB,UAAP,CAAkB,oBAAlB,EAAwCQ,WAAxC,CAAoDH,OAApD,EAEA,KAAKvB,iBAAL,GACD,C,uCA+BM,CACL,MACA,MAAKQ,KAAL,CAAWW,SAAX,CAAuB,oBAAC,aAAD,MAAvB,CACM,gDAFN,CAIH,C,sBA9DsB5B,KAAK,CAACoC,S,EAkE7B,QAASC,CAAAA,aAAT,EAAwB,CAChBf,OAAO,CAACC,GAAR,CAAY,uBAAZ,EACA,MACA,4BAAK,SAAS,CAAC,eAAf,EAA+B,wCAA/B,CADA,CAIP,CAGD,cAAerB,CAAAA,QAAf","sourcesContent":["import React from 'react';\nimport axios from 'axios';\n\nclass CatchAll extends React.Component {\n    \n\n constructor(props) {\n    super(props);\n    this.state = {\n    url: this.props.location,\n    matches: window.matchMedia(\"(min-width: 900px)\").matches,\n    isLoading:false\n    };\n\n    this.handleChange = this.handleChange.bind(this);\n }\n \nhandleChange(event) {\n    //this.setState({\n    //  input: event.target.value\n    //});\n   }\n\ncomponentDidMount() {\n    console.log('component mount');\n    const handler = e => this.setState({matches: e.matches});\n    window.matchMedia(\"(min-width: 900px)\").addListener(handler);\n    \n    this.callapi_FindShort();\n  }\n    \nrenderRedirect = (url) => {\n    window.location.replace(url)\n    \n  }\n    \ncallapi_FindShort = async () => {\n    const config = {\n        method: 'POST',\n        url: '/api/short_id',\n        timeout: 1000 * 5,\n        headers: {'Content-Type':'application/json',\n                 'Accept':'application/json',\n                 },\n        data: JSON.stringify({url:this.state.url})\n    }\n    \n    axios(config)\n    .then(response => {\n        const body =  response.data;\n\n        if (response.status !== 200) {\n          console.log('error findShortAPI ');\n          throw Error(body.message) \n        }\n        console.log('body ' + body.url);\n        this.renderRedirect(body.url);\n  }); //todo: some error handling and a 404 page\n          }\n\nrender() {\n    return (\n    this.state.isLoading ? <LoadingScreen/> \n        : <div>redirecting...</div>\n    )\n}\n        \n        }\n        \nfunction LoadingScreen(){\n        console.log('return loading screen');\n        return(\n        <div className=\"LoadingScreen\"><h3>loading</h3>\n        </div>\n   )\n}\n\n        \nexport default CatchAll;\n\n\n\n"]},"metadata":{},"sourceType":"module"}