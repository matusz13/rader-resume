{"ast":null,"code":"import _regeneratorRuntime from\"/Users/13triine/Documents/rader-resume/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _classCallCheck from\"/Users/13triine/Documents/rader-resume/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/13triine/Documents/rader-resume/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/13triine/Documents/rader-resume/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/13triine/Documents/rader-resume/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/Users/13triine/Documents/rader-resume/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/13triine/Documents/rader-resume/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import ShortenerScreen from'./ShortenerScreen.js';import axios from'axios';var Shortener=/*#__PURE__*/function(_React$Component){_inherits(Shortener,_React$Component);function Shortener(props){var _this;_classCallCheck(this,Shortener);_this=_possibleConstructorReturn(this,_getPrototypeOf(Shortener).call(this,props));_this.callapi_NewShort=function _callee(){var curURL,config;return _regeneratorRuntime.async(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:curURL=_this.state.input;config={method:'POST',url:'/api/newShortenURL',timeout:1000*5,headers:{'Content-Type':'application/json','Accept':'application/json'},data:JSON.stringify({url:curURL})};axios(config).then(function(response){// handle result\nvar body=response.data;console.log(\"response body: \"+body);if(body.error==='invalid URL'){_this.setState({error:'invalid url, please try again'});}else if(body.error==='Address not found'){_this.setState({error:'Could not verify url, please try again'});}else if(body.short_id){_this.setState({returnedurl:window.location.protocol+'//'+window.location.host+'/'+body.short_id});}else{_this.setState({error:'Something went wrong, please try again'});}}).catch(function(e){// handle errors and timeout error\nconsole.log('error callBackendAPI '+e.message);_this.setState({error:'there was an error, please try again'});});case 3:case\"end\":return _context.stop();}}});};_this.state={value:'url here',matches:window.matchMedia(\"(min-width: 900px)\").matches,isLoading:false,returnedurl:'',error:''};_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));_this.handleSubmit=_this.handleSubmit.bind(_assertThisInitialized(_this));return _this;}_createClass(Shortener,[{key:\"handleChange\",value:function handleChange(event){this.setState({input:event.target.value});}},{key:\"handleSubmit\",value:function handleSubmit(e){e.preventDefault();console.log(\"HANDLE SUBMIT xx\"+this.state.input);this.callapi_NewShort();}},{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;console.log('component mount');var handler=function handler(e){return _this2.setState({matches:e.matches});};window.matchMedia(\"(min-width: 900px)\").addListener(handler);}},{key:\"render\",value:function render(){return this.state.isLoading?React.createElement(LoadingScreen,null):React.createElement(ShortenerScreen,{onSubmit:this.handleSubmit,onChange:this.handleChange,returnedurl:this.state.returnedurl,error:this.state.error,input:this.state.input});}}]);return Shortener;}(React.Component);function LoadingScreen(){console.log('return loading screen');return React.createElement(\"div\",{className:\"LoadingScreen\"},React.createElement(\"h3\",null,\"loading\"));}export default Shortener;","map":{"version":3,"sources":["/Users/13triine/Documents/rader-resume/client/src/components/Shortener.js"],"names":["React","ShortenerScreen","axios","Shortener","props","callapi_NewShort","curURL","state","input","config","method","url","timeout","headers","data","JSON","stringify","then","response","body","console","log","error","setState","short_id","returnedurl","window","location","protocol","host","catch","e","message","value","matches","matchMedia","isLoading","handleChange","bind","handleSubmit","event","target","preventDefault","handler","addListener","Component","LoadingScreen"],"mappings":"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","sourcesContent":["import React from 'react';\nimport ShortenerScreen from './ShortenerScreen.js';\nimport axios from 'axios';\n\nclass Shortener extends React.Component {\n    \n\n constructor(props) {\n    super(props);\n    this.state = {\n    value: 'url here',\n    matches: window.matchMedia(\"(min-width: 900px)\").matches,\n    isLoading:false,\n    returnedurl:'',\n    error:''\n    };\n\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);  \n  }\n\n \n  handleChange(event) {\n    this.setState({\n      input: event.target.value\n    });\n   }\n  \n  handleSubmit(e){\n    e.preventDefault();\n    \n    console.log(\"HANDLE SUBMIT xx\" + this.state.input);\n      \n    this.callapi_NewShort()\n     \n  }\n\ncomponentDidMount() {\n    console.log('component mount');\n    const handler = e => this.setState({matches: e.matches});\n    window.matchMedia(\"(min-width: 900px)\").addListener(handler);\n  }\n    \n\n    \ncallapi_NewShort = async () => {\n   \n    let curURL = this.state.input;\n\n    const config = {\n        method: 'POST',\n        url: '/api/newShortenURL',\n        timeout: 1000 * 5,\n        headers: {'Content-Type':'application/json',\n                 'Accept':'application/json',\n                 \n                 },\n        data: JSON.stringify({url:curURL})\n    }\n   \n    axios(config)\n    .then(response => {\n            // handle result\n            const body =  response.data;\n            console.log(\"response body: \" +body)\n            if(body.error === 'invalid URL'){\n                this.setState({\n                    error:'invalid url, please try again'\n                });\n            }\n            else if(body.error === 'Address not found'){\n                this.setState({\n                    error:'Could not verify url, please try again'\n                });\n             }\n            else if(body.short_id){\n                this.setState({\n                    returnedurl:window.location.protocol + '//' + window.location.host  + '/'+ body.short_id\n                });\n            }else{\n                this.setState({\n                    error:'Something went wrong, please try again'\n                });\n            }\n              \n            \n            \n        })\n        .catch((e) => {\n            // handle errors and timeout error\n            console.log('error callBackendAPI ' +e.message);\n            this.setState({\n                    error:'there was an error, please try again'\n                });\n           \n        })\n  }\n\n\nrender() {\n    return (\n    this.state.isLoading ? <LoadingScreen/> \n        : <ShortenerScreen onSubmit = {this.handleSubmit} onChange = {this.handleChange} returnedurl={this.state.returnedurl} error={this.state.error} input={this.state.input}/>\n    )\n}\n        \n        }\n        \nfunction LoadingScreen(){\n        console.log('return loading screen');\n        return(\n        <div className=\"LoadingScreen\"><h3>loading</h3>\n        </div>\n   )\n}\n\n        \nexport default Shortener;\n\n\n\n"]},"metadata":{},"sourceType":"module"}